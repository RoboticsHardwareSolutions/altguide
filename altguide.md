
![[Ресурс 1.bmp]]
> [!abstract] Требования к проектированию электронных устройств в AltiumDesigner:

- [[#Библиотеки компонентов, шаблоны схем, шаблоны плат, скрипты|Библиотеки компонентов, шаблоны схем, шаблоны плат, скрипты]]
- [[#Оформление репозитория и правила работы|Оформление репозитория и правила работы]]
- [[#Правила добавления новых УГО и ТПМ компонентов:|Правила добавления новых УГО и ТПМ компонентов:]]
- [[#Название и назначение слоев в библиотеках и печатных платах|Название и назначение слоев в библиотеках и печатных платах]]
- [[#Названия слоев:|Названия слоев:]]
- [[#Принципиальные схемы|Принципиальные схемы]]
- [[#Правила проектирования принципиальных схем|Правила проектирования принципиальных схем]]
- [[#Правила проектирования печатных плат|Правила проектирования печатных плат]]
- [[#Документация|Документация]]
- [[#Формат gerber и сверловки|Формат gerber и сверловки]]
- [[#Структура bom.csv|Структура bom.csv]]
- [[#Cтруктура ext_bom.csv|Cтруктура ext_bom.csv]]

## Библиотеки компонентов, шаблоны схем, шаблоны плат, скрипты  

Содержимое репозитория:
- **/altlib** - файлы библиотек AltiumDesigner 
- **/files** - примеры и шаблоны файлов для удобства проектирования в соответствии с гайдом
- **/guide** - файлы самого гайда (obsidian)
- **/pcb_checker** - скрипт для автоматизированной проверки соответствия репозитория гайдам, а также общие проверки исходных файлов (помогает избежать досадных ошибок при отправке на производство)
- **/pcb_specgen** - генератор спецификаций по ЕСКД 

 Для работы необходимо использовать набор библиотек из папки `altlib`:
- **/schlibs** - библиотека условно графических отображений УГО
- **/pcblibs** - библиотеки топологческих посадочных мест ТПМ (Footprints)
- **/enclosures** -  корпуса для РЭА с 3D моделями и шаблоны печатных плат к ним 
- **/pcb** - `.stackup` файлы для плат разной толщины и слойности 
- **/sch_template** - шаблоны листов схем 
- **/flowchart** - библиотека блок схем
- **/scripts** - скрипты Altium 

## Оформление репозитория и правила работы

Перед началом проектирования устройства требуется посредством git клиента забрать последнюю версию из master ветки репозитория с билиотеками. После завершения проектирования устройства вновь добавленные компоненты требуется слить назад в новую ветвь с названием проекта в котором были добавлены изменения а в информации к коммиту написать что было добавлено.  
 
Файлы истории и превью необходимо УДАЛИТЬ перед тем как делать комит для этого создать `.gitignore` файл. Пример такого файла в папке `files/`, содержимое файла ниже.

```
/hardware/__Previews/
/doc/__Previews/
/doc/drawing/Status Report.Txt
/hardware/History/
.read
.open
open
read
/hardware/Project Logs for *
/hardware/Project Outputs for *
Status Report*
*Status Report.Txt
*.bak
*.bkp
```

## Правила добавления новых УГО и ТПМ компонентов:

*  Добавлять компонент необходимо в уже имеющиеся категории библиотечных файлов `xxx.schlib ` для УГО  +  соотвествующий ей файл `xxx.pcblib` для ТПМ. Если компонент не соответствует ни одной из предложенных категорий то добавляем в `other.schlib` + `other.pcblib`
*  Длина выводов компонента должна быть 5мм.  
*  Сетка должна быть метрическая 2.5мм. 
*  Подписи всех компонентов и названия выводов должны быть выполнены шрифтом GOST_type A, 10, обычный.
*  При начертании УГО необходимо стилистически соответствовать ЕСКД там где это возможно (допускается не полное копирование).
*  Допускается размещение графики только в соответствующих слоях, предназначенных для этой графики 
*  При добавлении ТПМ требуется добавление 3D модели компонента: [здесь есть большинство моделей](https://www.3dcontentcentral.com), если реалистичной модели найти не удалось то необходимо штатными средствами  AltiumDesigner отрисовать примитив.

## Название и назначение слоев в библиотеках и печатных платах

В библиотеках xxx.pcblib и двухслойных печатных платах требуется соблюдать следующие слои:
Слой шелкографии, паяльной маски и пасты оставляется по умолчанию

## Названия слоев:

![[two_layers2.png]]
![[two_layers-2.png]]
* `Board`     -  слой содержащий контур печатной платы.      
* `Plata`     -  слой для размещения дополнительной графки (не обязательно).   
* `TopAssy`   -  слой для сборочного чертежа с контурами компонентов (не обязательно при наличии 3D модели компонента)
* `BotAssy`   -  слой для сборочного чертежа с контурами компонентов (не обязательно при наличии 3D модели компонента)
* `Top3D`     -  слой с добавленными 3D моделями компонентов
* `Bot3D`     -  слой с добавленными 3D моделями компонентов
* `Board3D`   -  слой с 3D моделью печатной платы (если плата имеет сложный контур, вырезанный по модели)

В четырёхслойных печатных платах требуется соблюдать следующие слои:  

![[four_layers.png]]

## Принципиальные схемы 

При проектировании схем необходимо руководствоваться принципом  повторного использования листов схем и декомпозировать на логически связанные узлы элементов и размещать их в рамках одного листа 

Пример - проект устройства  на микроконтроллере можно декомпозировать на следующие листы:  

* лист `dcdc_ldo.schdoc` - содержит принципиальную схему преобразователя питания + линейный стабилизатор 
* лист `mcu.schdoc` - содержит принципиальную схему микроконтроллера с неоходимой обвязкой 
* лист `io.schdoc` - содержит принципиальную схему внешних входов выходов согласующих уровни МК с внешними сигналами.

## Правила проектирования принципиальных схем 

* Все УГО и ТПМ из библиотеки `/schlibs/` и `/pcblibs/` перед установкой на лист схемы дожны быть проверены на соответвие документации.
* Размещение компонетов необходимо производить в сетке 2.5мм
* Все подписи на принципиальной схеме требуется выполнять шрифтом GOST_type A, 10, обычный.
* При проектирование принципиальных схем требуется использовать предоставленные шаблоны в `/sch_template/` (заполнение рамки  не является необходимостью)
* Рекомендуемый типо-размер пассивных SMD компонентов не мельче 0603
* Если в устройстве стоит микроконтроллер с интерфейсом SWD (STM32) требуется установить типовой разьем c шагом 2.54мм c соблюдением распиновки:  

![[swd.png]]

*  pin 1 - `3.3V` - напряжение питание микроконтроллера.   
*  pin 2 - `SWDIO` - линия данных интерфейса SWD.      
*  pin 3 - `SWCLK` - линия тактировапния интерфейса SWD. 
*  pin 4 - `SWO` - линия выход данных последовательного интерфейса.  
*  pin 5 - `GND` - земля.  

Ножка `reset` не нужна  100% :).

## Правила проектирования печатных плат

* Требуется использовать название и назначение слоев из предыдущих пунктов 
* При проетироввании платы рекомендуется использовать односторонний монтаж компонентов (`иное согласовывается!`)
* Рекомендуется использовать не более 6 разных диаметров отверстий на печатной плате 
* Диаметр отверстий не менее 0.25мм 
* Минимальная ширина проводника на внешних слоях 0.2 мм и более 
* Минимальная ширина зазора на внешних слоях 0.2мм и более 
* Пояски контактных площадок (Annular ring) 0.25 мм и более
* Рекомендуется использовать типовой набор переходных отверстий `1: 0.3 отв. - 0.7 наруж.` , `2: 0.7 отв. - 1.3 наруж.` - отверстия необходимо закрывать паяльной маской если нет специфичных требований.
* Cтрого необходимо наносить шелкографическую маркировку на плату c позиционными обозначениями компонентов (иное согласовывается)
* Рекомендуемый размер шрифта шелкографии : толщина - 0.18мм, высота - 0.7мм 
* На плате должна быть нанесена версия печатной платы в соответствии с рекомендацией по семантическому версионированию : `HW 1.0.0`
* Если в составе устройства присутствует разъем для программирования, то необходимо наносить распиновку как на фото выше

## Документация

Итоговой комплект документации должен иметь следующую структуру и название файлов (не включенное в список требутся удалить!):

![[doc.png]]

* `/doc/` - cодержит документацию относящуюся к проекту  (datasheet "**если** **нада**" вставлять в файл README.md в виде ссылок c корпоративного NAS/OneDrive/YandeksDisk ....)
	* `/drawing/` - содержит чертежи печатной платы (если требуются) и обязательно 3d модель печатной платы со всеми компонентами .step .stp
	* `/pcb/` - папка содержит документацию для печатной платы 
		* `Assembly Drawings.PDF` - файл содержит сборочные чертежи печатной платы для ручного монтажа генерируемые AltiumDesigner
		* `board_options.txt` - файл содержит информацию о печатной плате 5 пунктов  (толщина платы,толщина меди, колличество слоев, цвет паяльной маски, цвет шелкографической маркировки, тип покрытия)
		* `Bill of Materials-xxxxxx.csv` - файлы BOM (если имеются дополительные внешние разьемы или прочая фурнитура необходимо указать отдельным файлом ext_bom.csv)
		* `/gerber/` - папка содержит гербер файлы для производства, файл сверловки и файл контура.  
		* `Pick Place xxxxxx.csv` - файл для автоматического установщика компонентов.  
		* `Schematic Prints.PDF` - файл схемы проекта AltiumDesigner
		* `mount_requirements.xxx` -  чертеж или изображение специфичных требований к монтажу выводных компонентов. Пример ниже 
	* `/photo/` - содержит два фото печатной платы устройства - скриншоты Altium3DView в png (top.png и bot.png)
	* `/pinout/` - содержит реалистичное изображение печатной платы с указаниием распиновки разъемов в `pinout.png`.  Файл требуется рисовать используя Draw.io и сохранять как редактируемый `.png` файл.       
* `/hardware/` - содержит проект печатной платы `__.PrjPCB __.PcbDoc __.SchDoc` файлы.  (только файлы относящиеся к проекту. Файлы и папки истории бибилиотеки и прочий мусор не должны лежать в репозитории, CAM файлы и папки Preview , OutputLogs удалить).  

**Пример файла** `mount_requirements` - иллюстрирует требования к  монтажу выводных элементов в составе печатной платы 
![[mount_requirements.png]]

Файл [README.md](files/README.md) - который необходимо размещать в корне репозитория имеет типовое содержание и не нуждается в редактировании в случае использования типовой структуры репозитория. Скачать по сылке добавить в репозиторий - **нужно изменить только имя проекта** в большинстве случае если вы не хотите добавлять специфичную информацию.  

Файл [board_options.txt](files/board_options.txt) - файл содержит пример необходимого описания структуры платы для заказа. Его содержимое также приведено ниже:

```toml
# в случае если плата не является типовой то поле type = "custom"
# для этого в репозитории должен содержаться файл board_options_draw.png 
# который иллюстрирует структуру и толщины слоев 


[board_options]
    type = "typical"               # тип печатной платы типовая или кастомная
    layers = 2                     # количесвтво слоев
    surface_finish = "ПОС63"       # покрытие печатной платы 
    pcb_color = "black"            # цвет паяльной маски печатной платы
    overlay_color = "white"        # цвет шелкографической маркировки
    pcb_thickness = 1.5            # толщина в милиметрах
    cooper_thickness = 35          # толщина меди в микрометрах
    solder_point = 1254            # колличество точек пайки
                                   # на случай ручного монтажа
    ext_bom = true                 # внешние коннекторы (true/false)
                                 . # значение true если у платы
                                 . # есть внешние коннекторы 
                                   # 
                                   # Если внешние разъемы есть то обязательно
                                   # наличие файла ext_bom.csv с указанием
                                   # доп фурнитуры 
```

Если сомневаетесь в синтаксической парвильности написания файла `board_options.txt` - поверьте с помощью онлайн валидатора [тут](https://www.toml-lint.com)    
В ситуации когда плата не является типовой (изготавливается попарным пресованием или имеет не стандарнтные толщины ) требуется указать в поле type = "custom" и приложить в папку doc/pcb файл - `board_options_draw.png`. Пример такого файла ниже:

![](files/board_option_draw.png)

Данный скриншот иллюстрирует полную структуру печатной кастомной платы общей толщиной 2 мм с нетиповой для производителя толщиной меди 105 um. 


Файл [job.outjob](files/job.outjob) - содержит готовых шаблон для генерации всех требуемый файлов, будьте внимательны требуется незначительное редактирование в каждом отдельном случае в зависимости от количества слоев печатной палаты и прочих параметров. 

## Формат gerber и сверловки

![[gerber_format.png]]

![[gerber_layers.png]]

## Структура bom.csv

**BOM обязательно должен содержать следующие столбцы !**

![[bom.png]]

## Cтруктура ext_bom.csv

**EXT BOM обязательно должен содержать следующие столбцы !**

Столбец **Сonnect to** - содержит УГО разъема на плате к кторому присоединяется коннектор

Пустой шаблон файла [тут](files/ext_bom.csv)

![[ext_bom.png]]




  
